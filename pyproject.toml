[build-system]
requires = ["scikit-build-core", "nanobind"]
build-backend = "scikit_build_core.build"

[project]
name = "tt-umd"
version = "1.0.0"
authors = [
    { name = "Tenstorrent", email = "foundationsw-umd@tenstorrent.com" }
]
description = "User Mode Driver for tenstorrent"
readme = "README.md"
license = { file = "LICENSE" }
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: POSIX :: Linux",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: C++",
    "Topic :: Software Development :: Libraries",
    "Topic :: System :: Hardware",
]

[project.urls]
"Homepage" = "https://tenstorrent.com"
"Bug Reports" = "https://github.com/tenstorrent/tt-umd/issues"
"Source" = "https://github.com/tenstorrent/tt-umd"
"Documentation" = "https://github.com/tenstorrent/tt-umd/blob/main/README.md"

[tool.scikit-build]
cmake.build-type = "Release"
build-dir = "build/"
# Only build the Python-related targets
cmake.targets = ["nanobind_tt_umd", "device"]
# Exclude development files from the wheel
wheel.exclude = ["CMakeCache.txt", "*.cmake", "CMakeFiles/", "Makefile"]
# Install only Python components (exclude lib/, include/, etc.)
install.components = ["python"]

[tool.scikit-build.cmake.define]
TT_UMD_BUILD_TESTS = "OFF"
TT_UMD_BUILD_SIMULATION = "OFF" 
TT_UMD_BUILD_PYTHON = "ON"