set(UBENCH_SRC
    benchmarks/tlb/test_tlb.cpp
    benchmarks/pcie_dma/test_pcie_dma.cpp
    benchmarks/iommu/test_iommu.cpp
    benchmarks/open_cluster/test_open_cluster.cpp
    common/microbenchmark_utils.cpp
)
add_executable(ubench ${UBENCH_SRC})
target_link_libraries(
    ubench
    PRIVATE
        test_common
        nanobench
)
target_include_directories(
    ubench
    PRIVATE
        ${nanobench_SOURCE_DIR}/src/include
        .
)
set_target_properties(
    ubench
    PROPERTIES
        RUNTIME_OUTPUT_DIRECTORY
            ${CMAKE_BINARY_DIR}/test/umd/ubenchmarks
)
